[script]
n0=on *:text:!commands*:#:{ msg # My current commands are !120 !bday !cache !calc !caught !clan !cml !emotes !grats !highfive !lag !links !mods !music !noob !poke !randomviewer !rc !remindcache !repair !rswiki !runetracker !spotify !stats !subscribe !time !tns !whatis !wiki }
n1=; also exist: !cheese !commands !guthixiancache !illuminati !ironman !life !nightbot !pi !roulette !rps !zezima, others - update
n2=; added !uptime - untested
n3=; added !tick - untested
n4=; standardized !cache and !remindcache?
n5=; look into !editcom?
n6=; add to !whatis, update !whatis for commands,
n7=; upgrade/fix calc - check, /0, upgrade
n8=; find editor, tester, IDE
n9=; 12/14/14
n10=; added lots of commands + options
n11=; edited number of connection retries (outside script)
n12=; added !lag
n13=; added !nightbot
n14=; added wiki to !whatis
n15=; added !help
n16=; 12/13/14
n17=; added lots of commands + options
n18=; fixed !remindcache
n19=; added !noob
n20=; added !grats option
n21=; fixed !mods
n22=; added !whatis
n23=; upgraded !remindcache
n24=; added !subscribe
n25=; added !wiki
n26=; made own $duration ($my_duration)
n27=
n28=on *:text:!120*:#:{ msg # 104,273,167 xp }
n29=on *:text:!bday*:#:{ msg # $my_duration($timeleft($ctime(December 20 2014 10:00:00))) until Mikki's birthday! }
n30=on *:text:!cache*:#:{
n31=  var %timeleft = $timeleft(0, 10800)
n32=  if (%timeleft isnum 0-) msg # $my_duration(%timeleft) until Guthixian Cache.
n33=}
n34=/*
n35=on *:text:!calc*:#:{
n36=  if ($2 isnum && $4 isnum && ($3 == + || $3 == - || $3 == * || $3 == / || $3 == ^ || $3 == %)) {
n37=    msg # $calc($2-)
n38=  }
n39=  else { msg # Invalid Operation. }
n40=}
n41=*/
n42=on *:text:!calc*:#: msg # $iif($regsubex($remove($2-,$chr(32),$chr(44)),/((^|[+-/^*%]+)(([0-9]|\56)+)(k|m|b)|(^|[+-/^*%]+)(([0-9]|\56)+)|(^|[+-/^*%]+)(\50(.+?)\51))/ig,),Syntax Error,$iif(!$2,Syntax Error,$2- = $regsubex($ticks,$calc($regsubex($ticks,$remove($2-,$chr(44),$chr(32)),/(^|[+-/*%]+|[+-/*%]+\50)(([0-9]|\56)+)(k|m|b)/ig,\1 $+ ( $+ \2 $+ $iif(\4 == b,*1000000000,$iif(\4 == m,*1000000,*1000)) $+ ))),/\G([+-]?\d+?)(?=(?:\d{3})++(?=\.\d++$|$))/g,\1 $+ $chr(44)))) 
n43=on *:text:!caught*:#:{
n44=  if ($2) { msg # Mikki has caught a wild $capital($2-)! }
n45=  else { msg # Mikki has caught a wild $capital($nick)! }
n46=}
n47=on *:text:!cheese*:#:{ msg # $cheese }
n48=on *:text:!clan*:#:{ msg # $clan }
n49=on *:text:!cml*:#:{ msg # $cml }
n50=on *:text:!emotes*:#:{ msg # $emotes }
n51=on *:text:!grats*:#:{
n52=  if ($2) { msg # Congratulations, $capital($2-)!!!!! }
n53=  else { msg # Congratulations!!!!! }
n54=}
n55=on *:text:!guthixiancache*:#:{ msg # $guthixiancache }
n56=on *:text:!help*:#:{ msg # Use !whatis _ and I will tell you what certain things or commands are. }
n57=on *:text:!highfive*:#:{
n58=  if ($2) { msg # $capital($nick) highfives $capital($2-)! }
n59=  else { msg # $capital($nick) highfives $capital($nick)! :-/ }
n60=}
n61=on *:text:!illuminati*:#:{ msg # $illuminati }
n62=on *:text:!ironman*:#:{ msg # $ironman }
n63=on *:text:!lag*:#:{ msg # #StreamingProblems }
n64=on *:text:!life*:#:{ msg # $life }
n65=on *:text:!links*:#:{ msg # $links }
n66=on *:text:!mods*:#:{
n67=  var %t = 0
n68=  while (%t <= $nick(#,0,o)) {
n69=    var %tmod = $iif(%tmod,%tmod $capital($nick(#,%t,o)),$capital($nick(#,%t,o)))
n70=    inc %t
n71=  }
n72=  msg # Mods Online: $iif(%tmod,%tmod,None)
n73=}
n74=on *:text:!music*:#:{ msg # $music }
n75=on *:text:!nightbot*:#:{ msg # !noob Nightbot }
n76=on *:text:!noob*:#:{
n77=  if ($2) {
n78=    if ($2 == harmonbot) { msg # I am not a noob. }
n79=    elseif ($2 == harmon758 || $2 == harmon) { msg # Harmon is not a noob. }
n80=    elseif ($2 == mikkiscape || $2 == mikki) { msg # Mikki is not a noob. How dare you. }
n81=    else { msg # $capital($2-) is a noob. }
n82=  }
n83=  else { msg # $capital($nick) , you are a noob. }
n84=}
n85=on *:text:!pi*:#:{
n86=  if ($nick isop #) {
n87=    msg # 3.14159265358979323846264338327 9502884197169399375105820974944 5923078164062862089986280348253 4211706798214808651328230664709 3844609550582231725359408128481 1174502841027019385211055596446 2294895493038196442881097566593 3446128475648233786783165271201 9091456485669234603486104543266 4821339360726024914127372458700 6606315588174881520920962829254 0917153643678925903600113305305 4882046652138414695194151160943 3057270365759591953092186117381 9326117931051185480744623799627 4956735188575272489122793818301 1949129833673362440656643086021 3949463952247371907021798609437
n88=  }
n89=  else { msg # 3.14 }
n90=}
n91=on *:text:!poke*:#:{
n92=  if ($2) { msg # $capital($nick) pokes $capital($2-)! }
n93=  else { msg # $capital($nick) pokes $capital($nick)! o_O }
n94=}
n95=on *:text:!randomviewer*:#:{ msg # $capital($nick(#,$rand(1,$nick(#,0)))) }
n96=on *:text:!rc*:#:{ msg # $rc }
n97=on *:text:!remindcache*:#:{
n98=  var %timeleft = $timeleft(0, 10800)
n99=  if ($2 isnum) {
n100=    var %offset = $calc($2 * 60), %msgtime = $calc(%timeleft - %offset)
n101=    msg # $capital($nick) , I'll remind you $my_duration(%offset) before Guthixian Cache.
n102=    if (%msgtime isnum 0-) .timer 1 %msgtime msg # $capital($nick) , Guthixian Cache is in $my_duration(%offset)!
n103=  }
n104=  else {
n105=    var %offset = 300, %msgtime = $calc(%timeleft - %offset)
n106=    msg # $capital($nick) , I'll remind you 5 minutes before Guthixian Cache.
n107=    if (%msgtime isnum 0-) .timer 1 %msgtime msg # $capital($nick) , Guthixian Cache is in 5 minutes!
n108=  }
n109=}
n110=on *:text:!repair*:$: { msg # $repair }
n111=on *:text:!runetracker*:#:{ msg # $runetracker }
n112=on *:text:!rswiki*:#:{ msg # runescape.wikia.com/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n113=on *:text:!spotify*:#:{ msg # $music }
n114=on *:text:!stats*:#:{ msg # $stats }
n115=on *:text:!subscribe*:#:{ msg # $suscribe }
n116=on *:text:!time*:#:{ msg # It is currently $asctime($calc($gmt + 3600 * 8),h:nn tt) on $asctime($calc($gmt + 3600 * 8),mmmm d) in Western Australia (GMT+8). }
n117=on *:text:!tns*:#:{ msg # #TeamNoSleep }
n118=on *:text:!whatis*:#:{
n119=  if ($2) {
n120=    if ($2 == cache) { msg # $guthixiancache }
n121=    elseif ($2 == cheese) { msg # $cheese }
n122=    elseif ($2 == ironman) { msg # $ironman }
n123=    elseif ($2 == !commands) { msg # Use !commands and I will tell you my commands. }
n124=    elseif ($2 == !cache) { msg # Use !cache and I will tell you the time until the next Guthixian Cache. }
n125=    elseif ($2 == !grats) { msg # Use !grats to congratulate someone. (Optional: !grats Name) }
n126=    elseif ($2 == harmonbot) { msg # That's me! }
n127=    elseif ($2 == illuminati) { msg # $illuminati }
n128=    elseif ($2 == life) { msg # $life }
n129=    elseif ($2 == love) { msg # $love }
n130=    elseif ($2 == mikki || $2 == mikkiscape) { msg # That's who you're watching! }
n131=    elseif ($2 == !noob) { msg # Use !noob to call someone a noob. }
n132=    elseif ($2 == !remindcache) { msg # Use !remindcache # and I will remind you # minutes before Guthixian Cache. (Default is 5 if no # given) }
n133=    elseif ($2 == stats) { msg # $stats }
n134=    elseif ($2 == !time) { msg # Use !time and I will tell your Mikki's current time. }
n135=    elseif ($2 == !tns) { msg # Use !tns to support #TeamNoSleep. }
n136=    elseif ($2 == !whatis) { msg # That's the command you just used! Use it and I will tell you what certain things or commands are. }
n137=    elseif ($2 == zezima) { msg # $zezima }
n138=    elseif ($2 isnum && $4 isnum && ($3 == + || $3 == - || $3 == * || $3 == / || $3 == ^ || $3 == %)) {
n139=      msg # $2- = $calc($2-)
n140=    }
n141=    else { msg # I don't know what that is. Try runescape.wikia.com/wiki/ $+ $replace($2-,$chr(32),$chr(95)) or wikipedia.org/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n142=  }
n143=  else { msg # What is what? }
n144=}
n145=on *:text:!wiki*:#: { msg # wikipedia.org/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n146=on *:text:!zezima*:$: { msg # $zezima }
n147=
n148=/*
n149=on *:text:!uptime*:#:{
n150=  msg # $uptime(system,1)
n151=}
n152=*/
n153=
n154=on *:text:!roulette*:#: {
n155=  if ($nick isop #) && ($2) {
n156=    if ($istok(on,$2,32)) {
n157=      set %roulette.status on 
n158=      msg # Roulette is on.
n159=      return
n160=    }
n161=    if ($istok(off,$2,32)) {
n162=      set %roulette.status off 
n163=      msg # Roulette is off.
n164=      return
n165=    }
n166=  }
n167=  if (%roulette.status == off) { return }
n168=  /*
n169=  if ((%floodroulette) || ($($+(%,floodroulette.,$nick),2))) { return }
n170=  set -u10 %floodroulette On
n171=  set -u30 %floodroulette. $+ $nick On
n172=  */
n173=  if ($nick isop #) {
n174=    var %randmods = $rand(1,4)
n175=    if (%randmods == 1) { msg # Roulette clicks!...Empty...You live to see another day, $capital($nick) }
n176=    if (%randmods == 2) { msg # BANG! ... You were shot, but live! There must be secert powers in your mod armor, $capital($nick) }
n177=    if (%randmods == 3) { msg # BANG! ... The bullet missed, you only have your born moderation powers to thank, $capital($nick) }
n178=    if (%randmods == 4) { msg # $capital($nick) starts to shake, $capital($nick) tries to pull the trigger but can't. $capital($nick) drops the gun, $capital($nick) isn't up to the challenge of Roulette. }
n179=  }
n180=  else {
n181=    var %randnumber = $rand(1,4)
n182=    if (%randnumber == 1) { msg # BANG!... Roulette claims another soul. R.I.P $capital($nick) }
n183=    if (%randnumber == 2) { msg # Roulette clicks!...Empty...You live to see another day, $capital($nick) }
n184=    if (%randnumber == 3) { msg # BANG!... $capital($nick) Was a great viewer, and now $capital($nick) is a dead viewer. R.I.P }
n185=    if (%randnumber == 4) { msg # $capital($nick) starts to shake, $capital($nick) tries to pull the trigger but can't. $capital($nick) drops the gun, $capital($nick) isn't up to the challenge of Roulette. }
n186=  }
n187=}
n188=
n189=on *:text:!rps*:#: {
n190=  if ($nick isop #) && ($2) {
n191=    if ($istok(on,$2,32)) {
n192=      set %rps.status on 
n193=      msg # RPS is on.
n194=      return
n195=    }
n196=    if ($istok(off,$2,32)) {
n197=      set %rps.status off 
n198=      msg # RPS is off.
n199=      return
n200=    }
n201=  }
n202=  if (%rps.status == off) { return }
n203=  if ($2 == scissors) {
n204=    var %scissors = $rand(1,3)
n205=    if (%scissors == 1) { msg # ROCK -- Rock beats Scissors! You lose, $capital($nick) ! }
n206=    if (%scissors == 2) { msg # PAPER -- Hmm, I lose. Congrats, $capital($nick) }
n207=    if (%scissors == 3) { msg # SCISSORS -- Dang it, it's a draw. }
n208=    return
n209=  }
n210=  if ($2 == paper) {
n211=    var %paper = $rand(1,3)
n212=    if (%paper == 1) { msg # SCISSORS -- Scissors beats Paper! You lose, $capital($nick) ! }
n213=    if (%paper == 2) { msg # ROCK -- Hmm, I lose. Congrats, $capital($nick) }
n214=    if (%paper == 3) { msg # PAPER -- Dang it, it's a draw. }
n215=    return
n216=  }
n217=  if ($2 == rock) {
n218=    var %rock = $rand(1,3)
n219=    if (%rock == 1) { msg # PAPER -- Paper beats Rock! You lose, $capital($nick) ! }
n220=    if (%rock == 2) { msg # SCISSORS -- Hmm, I lose. Congrats, $capital($nick) }
n221=    if (%rock == 3) { msg # ROCK -- Dang it, it's a draw. }
n222=    return
n223=  }
n224=  msg # $capital($nick) is a cheater. Reported.
n225=}
n226=
n227=alias timeleft {
n228=  var %start = $1, %interval = $2, %timeleft
n229=  if ($ctime <= %start) || (!%interval) { %timeleft = $calc(%start - $ctime) }
n230=  else { %timeleft = $calc(%interval - ($ctime - %start) % %interval) }
n231=  return %timeleft
n232=}
n233=
n234=alias my_duration {
n235=  var %secs = $1, %my_duration
n236=  if (%secs > 604800) {
n237=    %my_duration = %my_duration $floor($calc(%secs / 604800)) weeks
n238=    %secs = $calc(%secs - $floor($calc(%secs / 604800)) * 604800)
n239=  }
n240=  if (%secs > 86400) {
n241=    %my_duration = %my_duration $floor($calc(%secs / 86400)) days
n242=    %secs = $calc(%secs - $floor($calc(%secs / 86400)) * 86400)
n243=  }
n244=  if (%secs > 3600) {
n245=    %my_duration = %my_duration $floor($calc(%secs / 3600)) hours
n246=    %secs = $calc(%secs - $floor($calc(%secs / 3600)) * 3600)
n247=  }
n248=  if (%secs > 60) {
n249=    %my_duration = %my_duration $floor($calc(%secs / 60)) minutes
n250=    %secs = $calc(%secs - $floor($calc(%secs / 60)) * 60)
n251=  }
n252=  if (%secs != 0) {
n253=    %my_duration = %my_duration %secs seconds
n254=  }
n255=  return %my_duration
n256=}
n257=
n258=on *:text:!tick*:#:{
n259=  %count = $calc(%count + 1)
n260=  msg # Mikki has wasted %count ticks. http://i.imgur.com/bSCnFb1.png
n261=}
n262=
n263=on *:text:!uptime*:#:{
n264=  sockclose uptime
n265=  sockopen uptime nightdev.com 80
n266=}
n267=on *:sockopen:uptime:{
n268=  if ($sockerr) { sockclose $sockname | halt }
n269=  sockwrite -n $sockname GET /hosted/uptime.php?channel=mikkiscape HTTP/1.1
n270=  sockwrite -n $sockname Host: nightdev.com $crlf $+ $crlf
n271=}
n272=on *:sockread:uptime:{
n273=  if ($sockerr) { sockclose $sockname }
n274=  var %streamodata
n275=  sockread %streamodata
n276=  if ($regex(%streamodata,(.*)minutes)) { msg #mikkiscape $regml(1) minutes }
n277=  if ($regex(%streamodata,(.*)live.)) { msg #mikkiscape Mikki is offline. }
n278=}
n279=
n280=; alias safe return $decode( $encode($1-,m),m )
n281=
n282=alias capital return $upper($left($1,1)) $+ $mid($1,2-)
n283=
n284=alias cheese return http://en.wikipedia.org/wiki/Cheese
n285=alias cml return http://crystalmathlabs.com/tracker/track.php?player=aru
n286=alias clan return || RS3 Clan || http://services.runescape.com/m=clan-home/clan/Gum || OSRS Clan || http://services.runescape.com/m=forum/forums.ws?320,321,920,65349188
n287=alias emotes return http://puu.sh/b1hyR.jpg
n288=alias guthixiancache return runescape.wikia.com/wiki/Guthixian_Cache
n289=alias illuminati return http://en.wikipedia.org/wiki/Illuminati
n290=alias links return Twitter: https://twitter.com/mikkiscape YouTube: https://www.youtube.com/user/mikscape
n291=alias ironman return runescape.wikia.com/wiki/Ironman_Mode
n292=alias life return http://en.wikipedia.org/wiki/Life
n293=alias love return http://en.wikipedia.org/wiki/Love https://www.youtube.com/watch?v=xhrBDcQq2DM
n294=alias music return http://open.spotify.com/user/mikkirs/playlist/5OBCdMNiGiTRGL0cqWL9CT
n295=alias rc return || OSRS || 92/99 --------- || Ironman || 88/99
n296=alias repair return REPAIR POUCH! REPAIR POUCH! REPAIR POUCH! REPAIR POUCH!
n297=alias runetracker return || Main || http://runetracker.org/track-mikki || Ironman || http://runetracker.org/track-fe+mikki
n298=alias stats return || Main || http://www.indecentcode.com/hs/index.php?id=mikki --- || OSRS || http://www.indecentcode.com/oldschool/index.php?id=aru || Ironman || http://indecentcode.com/hs/index.php?id=Fe+Mikki
n299=alias suscribe return https://secure.twitch.tv/products/mikkiscape/ticket
n300=alias zezima return http://rsplayers.wikia.com/wiki/Zezima
