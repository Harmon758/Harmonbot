[script]
n0=on *:text:!commands*:#:{ msg # My current commands are !120 !bday !cache !calc !caught !clan !cml !emotes !grats !highfive !lag !links !mods !music !noob !poke !randomviewer !rc !remindcache !repair !rswiki !runetracker !spotify !stats !subscribe !time !tns !whatis !wiki }
n1=; also exist: !cheese !commands !guthixiancache !illuminati !ironman !life !nightbot !pi !roulette !rps !zezima, others - update
n2=; added !uptime - untested
n3=; added !tick - untested
n4=; standardized !cache and !remindcache?
n5=; look into !editcom?
n6=; add to !whatis, upgrade/fix calc
n7=; find editor, tester, IDE
n8=; 12/14/14
n9=; added lots of commands + options
n10=; edited number of connection retries (outside script)
n11=; added !lag
n12=; added !nightbot
n13=; added wiki to !whatis
n14=; added !help
n15=; 12/13/14
n16=; added lots of commands + options
n17=; fixed !remindcache
n18=; added !noob
n19=; added !grats option
n20=; fixed !mods
n21=; added !whatis
n22=; upgraded !remindcache
n23=; added !subscribe
n24=; added !wiki
n25=; made own $duration ($my_duration)
n26=
n27=on *:text:!120*:#:{ msg # 104,273,167 xp }
n28=on *:text:!bday*:#:{ msg # $my_duration($timeleft($ctime(December 20 2014 10:00:00))) until Mikki's birthday! }
n29=on *:text:!cache*:#:{
n30=  var %timeleft = $timeleft(0, 10800)
n31=  if (%timeleft isnum 0-) msg # $my_duration(%timeleft) until Guthixian Cache.
n32=}
n33=on *:text:!calc*:#:{
n34=  if ($2 isnum && $4 isnum && ($3 == + || $3 == - || $3 == * || $3 == / || $3 == ^ || $3 == %)) {
n35=    msg # $calc($2-)
n36=  }
n37=  else { msg # Invalid Operation. }
n38=}
n39=on *:text:!caught*:#:{
n40=  if ($2) { msg # Mikki has caught a wild $capital($2-)! }
n41=  else { msg # Mikki has caught a wild $capital($nick)! }
n42=}
n43=on *:text:!cheese*:#:{ msg # $cheese }
n44=on *:text:!clan*:#:{ msg # $clan }
n45=on *:text:!cml*:#:{ msg # $cml }
n46=on *:text:!emotes*:#:{ msg # $emotes }
n47=on *:text:!grats*:#:{
n48=  if ($2) { msg # Congratulations, $capital($2-)!!!!! }
n49=  else { msg # Congratulations!!!!! }
n50=}
n51=on *:text:!guthixiancache*:#:{ msg # $guthixiancache }
n52=on *:text:!help*:#:{ msg # Use !whatis _ and I will tell you what certain things or commands are. }
n53=on *:text:!highfive*:#:{
n54=  if ($2) { msg # $capital($nick) highfives $capital($2-)! }
n55=  else { msg # $capital($nick) highfives $capital($nick)! :-/ }
n56=}
n57=on *:text:!illuminati*:#:{ msg # $illuminati }
n58=on *:text:!ironman*:#:{ msg # $ironman }
n59=on *:text:!lag*:#:{ msg # #StreamingProblems }
n60=on *:text:!life*:#:{ msg # $life }
n61=on *:text:!links*:#:{ msg # $links }
n62=on *:text:!mods*:#:{
n63=  var %t = 0
n64=  while (%t <= $nick(#,0,o)) {
n65=    var %tmod = $iif(%tmod,%tmod $capital($nick(#,%t,o)),$capital($nick(#,%t,o)))
n66=    inc %t
n67=  }
n68=  msg # Mods Online: $iif(%tmod,%tmod,None)
n69=}
n70=on *:text:!music*:#:{ msg # $music }
n71=on *:text:!nightbot*:#:{ msg # !noob Nightbot }
n72=on *:text:!noob*:#:{
n73=  if ($2) {
n74=    if ($2 == harmonbot) { msg # I am not a noob. }
n75=    elseif ($2 == harmon758 || $2 == harmon) { msg # Harmon is not a noob. }
n76=    elseif ($2 == mikkiscape || $2 == mikki) { msg # Mikki is not a noob. How dare you. }
n77=    else { msg # $capital($2-) is a noob. }
n78=  }
n79=  else { msg # $capital($nick) , you are a noob. }
n80=}
n81=on *:text:!pi*:#:{
n82=  if ($nick isop #) {
n83=    msg # 3.14159265358979323846264338327 9502884197169399375105820974944 5923078164062862089986280348253 4211706798214808651328230664709 3844609550582231725359408128481 1174502841027019385211055596446 2294895493038196442881097566593 3446128475648233786783165271201 9091456485669234603486104543266 4821339360726024914127372458700 6606315588174881520920962829254 0917153643678925903600113305305 4882046652138414695194151160943 3057270365759591953092186117381 9326117931051185480744623799627 4956735188575272489122793818301 1949129833673362440656643086021 3949463952247371907021798609437
n84=  }
n85=  else { msg # 3.14 }
n86=}
n87=on *:text:!poke*:#:{
n88=  if ($2) { msg # $capital($nick) pokes $capital($2-)! }
n89=  else { msg # $capital($nick) pokes $capital($nick)! o_O }
n90=}
n91=on *:text:!randomviewer*:#:{ msg # $capital($nick(#,$rand(1,$nick(#,0)))) }
n92=on *:text:!rc*:#:{ msg # $rc }
n93=on *:text:!remindcache*:#:{
n94=  var %timeleft = $timeleft(0, 10800)
n95=  if ($2 isnum) {
n96=    var %offset = $calc($2 * 60), %msgtime = $calc(%timeleft - %offset)
n97=    msg # $capital($nick) , I'll remind you $my_duration(%offset) before Guthixian Cache.
n98=    if (%msgtime isnum 0-) .timer 1 %msgtime msg # $capital($nick) , Guthixian Cache is in $my_duration(%offset)!
n99=  }
n100=  else {
n101=    var %offset = 300, %msgtime = $calc(%timeleft - %offset)
n102=    msg # $capital($nick) , I'll remind you 5 minutes before Guthixian Cache.
n103=    if (%msgtime isnum 0-) .timer 1 %msgtime msg # $capital($nick) , Guthixian Cache is in 5 minutes!
n104=  }
n105=}
n106=on *:text:!repair*:$: { msg # $repair }
n107=on *:text:!runetracker*:#:{ msg # $runetracker }
n108=on *:text:!rswiki*:#:{ msg # runescape.wikia.com/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n109=on *:text:!spotify*:#:{ msg # $music }
n110=on *:text:!stats*:#:{ msg # $stats }
n111=on *:text:!subscribe*:#:{ msg # $suscribe }
n112=on *:text:!time*:#:{ msg # It is currently $asctime($calc($gmt + 3600 * 8),h:nn tt) on $asctime($calc($gmt + 3600 * 8),mmmm d) in Western Australia (GMT+8). }
n113=on *:text:!tns*:#:{ msg # #TeamNoSleep }
n114=on *:text:!whatis*:#:{
n115=  if ($2) {
n116=    if ($2 == cache) { msg # $guthixiancache }
n117=    elseif ($2 == cheese) { msg # $cheese }
n118=    elseif ($2 == ironman) { msg # $ironman }
n119=    elseif ($2 == !commands) { msg # Use !commands and I will tell you my commands. }
n120=    elseif ($2 == !cache) { msg # Use !cache and I will tell you the time until the next Guthixian Cache. }
n121=    elseif ($2 == !grats) { msg # Use !grats to congratulate someone. (Optional: !grats Name) }
n122=    elseif ($2 == harmonbot) { msg # That's me! }
n123=    elseif ($2 == illuminati) { msg # $illuminati }
n124=    elseif ($2 == life) { msg # $life }
n125=    elseif ($2 == love) { msg # $love }
n126=    elseif ($2 == mikki || $2 == mikkiscape) { msg # That's who you're watching! }
n127=    elseif ($2 == !noob) { msg # Use !noob to call someone a noob. }
n128=    elseif ($2 == !remindcache) { msg # Use !remindcache # and I will remind you # minutes before Guthixian Cache. (Default is 5 if no # given) }
n129=    elseif ($2 == stats) { msg # $stats }
n130=    elseif ($2 == !time) { msg # Use !time and I will tell your Mikki's current time. }
n131=    elseif ($2 == !tns) { msg # Use !tns to support #TeamNoSleep. }
n132=    elseif ($2 == !whatis) { msg # That's the command you just used! Use it and I will tell you what certain things or commands are. }
n133=    elseif ($2 == zezima) { msg # $zezima }
n134=    elseif ($2 isnum && $4 isnum && ($3 == + || $3 == - || $3 == * || $3 == / || $3 == ^ || $3 == %)) {
n135=      msg # $2- = $calc($2-)
n136=    }
n137=    else { msg # I don't know what that is. Try runescape.wikia.com/wiki/ $+ $replace($2-,$chr(32),$chr(95)) or wikipedia.org/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n138=  }
n139=  else { msg # What is what? }
n140=}
n141=on *:text:!wiki*:#: { msg # wikipedia.org/wiki/ $+ $replace($2-,$chr(32),$chr(95)) }
n142=on *:text:!zezima*:$: { msg # $zezima }
n143=
n144=/*
n145=on *:text:!uptime*:#:{
n146=  msg # $uptime(system,1)
n147=}
n148=*/
n149=
n150=on *:text:!roulette*:#: {
n151=  if ($nick isop #) && ($2) {
n152=    if ($istok(on,$2,32)) {
n153=      set %roulette.status on 
n154=      msg # Roulette is on.
n155=      return
n156=    }
n157=    if ($istok(off,$2,32)) {
n158=      set %roulette.status off 
n159=      msg # Roulette is off.
n160=      return
n161=    }
n162=  }
n163=  if (%roulette.status == off) { return }
n164=  /*
n165=  if ((%floodroulette) || ($($+(%,floodroulette.,$nick),2))) { return }
n166=  set -u10 %floodroulette On
n167=  set -u30 %floodroulette. $+ $nick On
n168=  */
n169=  if ($nick isop #) {
n170=    var %randmods = $rand(1,4)
n171=    if (%randmods == 1) { msg # Roulette clicks!...Empty...You live to see another day, $capital($nick) }
n172=    if (%randmods == 2) { msg # BANG! ... You were shot, but live! There must be secert powers in your mod armor, $capital($nick) }
n173=    if (%randmods == 3) { msg # BANG! ... The bullet missed, you only have your born moderation powers to thank, $capital($nick) }
n174=    if (%randmods == 4) { msg # $capital($nick) starts to shake, $capital($nick) tries to pull the trigger but can't. $capital($nick) drops the gun, $capital($nick) isn't up to the challenge of Roulette. }
n175=  }
n176=  else {
n177=    var %randnumber = $rand(1,4)
n178=    if (%randnumber == 1) { msg # BANG!... Roulette claims another soul. R.I.P $capital($nick) }
n179=    if (%randnumber == 2) { msg # Roulette clicks!...Empty...You live to see another day, $capital($nick) }
n180=    if (%randnumber == 3) { msg # BANG!... $capital($nick) Was a great viewer, and now $capital($nick) is a dead viewer. R.I.P }
n181=    if (%randnumber == 4) { msg # $capital($nick) starts to shake, $capital($nick) tries to pull the trigger but can't. $capital($nick) drops the gun, $capital($nick) isn't up to the challenge of Roulette. }
n182=  }
n183=}
n184=
n185=on *:text:!rps*:#: {
n186=  if ($nick isop #) && ($2) {
n187=    if ($istok(on,$2,32)) {
n188=      set %rps.status on 
n189=      msg # RPS is on.
n190=      return
n191=    }
n192=    if ($istok(off,$2,32)) {
n193=      set %rps.status off 
n194=      msg # RPS is off.
n195=      return
n196=    }
n197=  }
n198=  if (%rps.status == off) { return }
n199=  if ($2 == scissors) {
n200=    var %scissors = $rand(1,3)
n201=    if (%scissors == 1) { msg # ROCK -- Rock beats Scissors! You lose, $capital($nick) ! }
n202=    if (%scissors == 2) { msg # PAPER -- Hmm, I lose. Congrats, $capital($nick) }
n203=    if (%scissors == 3) { msg # SCISSORS -- Dang it, it's a draw. }
n204=    return
n205=  }
n206=  if ($2 == paper) {
n207=    var %paper = $rand(1,3)
n208=    if (%paper == 1) { msg # SCISSORS -- Scissors beats Paper! You lose, $capital($nick) ! }
n209=    if (%paper == 2) { msg # ROCK -- Hmm, I lose. Congrats, $capital($nick) }
n210=    if (%paper == 3) { msg # PAPER -- Dang it, it's a draw. }
n211=    return
n212=  }
n213=  if ($2 == rock) {
n214=    var %rock = $rand(1,3)
n215=    if (%rock == 1) { msg # PAPER -- Paper beats Rock! You lose, $capital($nick) ! }
n216=    if (%rock == 2) { msg # SCISSORS -- Hmm, I lose. Congrats, $capital($nick) }
n217=    if (%rock == 3) { msg # ROCK -- Dang it, it's a draw. }
n218=    return
n219=  }
n220=  msg # $capital($nick) is a cheater. Reported.
n221=}
n222=
n223=alias timeleft {
n224=  var %start = $1, %interval = $2, %timeleft
n225=  if ($ctime <= %start) || (!%interval) { %timeleft = $calc(%start - $ctime) }
n226=  else { %timeleft = $calc(%interval - ($ctime - %start) % %interval) }
n227=  return %timeleft
n228=}
n229=
n230=alias my_duration {
n231=  var %secs = $1, %my_duration
n232=  if (%secs > 604800) {
n233=    %my_duration = %my_duration $floor($calc(%secs / 604800)) weeks
n234=    %secs = $calc(%secs - $floor($calc(%secs / 604800)) * 604800)
n235=  }
n236=  if (%secs > 86400) {
n237=    %my_duration = %my_duration $floor($calc(%secs / 86400)) days
n238=    %secs = $calc(%secs - $floor($calc(%secs / 86400)) * 86400)
n239=  }
n240=  if (%secs > 3600) {
n241=    %my_duration = %my_duration $floor($calc(%secs / 3600)) hours
n242=    %secs = $calc(%secs - $floor($calc(%secs / 3600)) * 3600)
n243=  }
n244=  if (%secs > 60) {
n245=    %my_duration = %my_duration $floor($calc(%secs / 60)) minutes
n246=    %secs = $calc(%secs - $floor($calc(%secs / 60)) * 60)
n247=  }
n248=  if (%secs != 0) {
n249=    %my_duration = %my_duration %secs seconds
n250=  }
n251=  return %my_duration
n252=}
n253=
n254=on *:text:!tick*:#:{
n255=  %count = $calc(%count + 1)
n256=  msg # Mikki has wasted %count ticks. http://i.imgur.com/bSCnFb1.png
n257=}
n258=
n259=on *:text:!uptime*:#:{
n260=  sockclose uptime
n261=  sockopen uptime nightdev.com 80
n262=}
n263=on *:sockopen:uptime:{
n264=  if ($sockerr) { sockclose $sockname | halt }
n265=  sockwrite -n $sockname GET /hosted/uptime.php?channel=mikkiscape HTTP/1.1
n266=  sockwrite -n $sockname Host: nightdev.com $crlf $+ $crlf
n267=}
n268=on *:sockread:uptime:{
n269=  if ($sockerr) { sockclose $sockname }
n270=  var %streamodata
n271=  sockread %streamodata
n272=  if ($regex(%streamodata,(.*)minutes)) { msg #mikkiscape $regml(1) minutes }
n273=  if ($regex(%streamodata,(.*)live.)) { msg #mikkiscape Mikki is offline. }
n274=}
n275=
n276=; alias safe return $decode( $encode($1-,m),m )
n277=
n278=alias capital return $upper($left($1,1)) $+ $mid($1,2-)
n279=
n280=alias cheese return http://en.wikipedia.org/wiki/Cheese
n281=alias cml return http://crystalmathlabs.com/tracker/track.php?player=aru
n282=alias clan return || RS3 Clan || http://services.runescape.com/m=clan-home/clan/Gum || OSRS Clan || http://services.runescape.com/m=forum/forums.ws?320,321,920,65349188
n283=alias emotes return http://puu.sh/b1hyR.jpg
n284=alias guthixiancache return runescape.wikia.com/wiki/Guthixian_Cache
n285=alias illuminati return http://en.wikipedia.org/wiki/Illuminati
n286=alias links return Twitter: https://twitter.com/mikkiscape YouTube: https://www.youtube.com/user/mikscape
n287=alias ironman return runescape.wikia.com/wiki/Ironman_Mode
n288=alias life return http://en.wikipedia.org/wiki/Life
n289=alias love return http://en.wikipedia.org/wiki/Love https://www.youtube.com/watch?v=xhrBDcQq2DM
n290=alias music return http://open.spotify.com/user/mikkirs/playlist/5OBCdMNiGiTRGL0cqWL9CT
n291=alias rc return || OSRS || 92/99 --------- || Ironman || 88/99
n292=alias repair return REPAIR POUCH! REPAIR POUCH! REPAIR POUCH! REPAIR POUCH!
n293=alias runetracker return || Main || http://runetracker.org/track-mikki || Ironman || http://runetracker.org/track-fe+mikki
n294=alias stats return || Main || http://www.indecentcode.com/hs/index.php?id=mikki --- || OSRS || http://www.indecentcode.com/oldschool/index.php?id=aru || Ironman || http://indecentcode.com/hs/index.php?id=Fe+Mikki
n295=alias suscribe return https://secure.twitch.tv/products/mikkiscape/ticket
n296=alias zezima return http://rsplayers.wikia.com/wiki/Zezima
